<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hologram Diagnosztika</title>
    
    <script src="https://www.geogebra.org/apps/deployggb.js"></script>

    <style>
        body {
            margin: 0; background-color: #000; overflow: hidden;
            color: #0f0; font-family: monospace; /* Zöld betűk, mint a Mátrixban :) */
        }
        #hologram-container {
            position: absolute; top: 50%; left: 50%;
            width: 90vmin; height: 90vmin;
            transform: translate(-50%, -50%);
        }
        /* A 4 nézet keretei - most láthatóvá téve */
        .view-box {
            position: absolute; width: 50%; height: 50%;
            border: 1px solid #333; /* Vékony keret */
            box-sizing: border-box;
            display: flex; justify-content: center; align-items: center;
        }
        
        /* Pozíciók és Forgatás */
        #view-top { top: 0; left: 25%; transform: rotate(180deg); transform-origin: center bottom; }
        #view-bottom { bottom: 0; left: 25%; transform: rotate(0deg); transform-origin: center top; }
        #view-left { top: 25%; left: 0; transform: rotate(90deg); transform-origin: right center; }
        #view-right { top: 25%; right: 0; transform: rotate(-90deg); transform-origin: left center; }

        /* A GeoGebra tároló elemek */
        .ggb-container { width: 100%; height: 100%; display: block; background: #111; }

        /* Állapotjelző napló */
        #log-window {
            position: absolute; top: 10px; left: 10px;
            background: rgba(0,0,0,0.8); padding: 10px;
            border: 1px solid #0f0; z-index: 9999;
            max-width: 300px; font-size: 12px; pointer-events: none;
        }
        .crosshair {
            position: absolute; top: 50%; left: 50%; width: 10px; height: 10px;
            background: red; border-radius: 50%; transform: translate(-50%, -50%); z-index: 1000;
        }
    </style>
</head>
<body>

    <div id="log-window">Rendszer indítása...</div>
    <div class="crosshair"></div>

    <div id="hologram-container">
        <div id="view-top" class="view-box"><div id="ggb-1" class="ggb-container">1. Nézet</div></div>
        <div id="view-left" class="view-box"><div id="ggb-2" class="ggb-container">2. Nézet</div></div>
        <div id="view-right" class="view-box"><div id="ggb-3" class="ggb-container">3. Nézet</div></div>
        <div id="view-bottom" class="view-box"><div id="ggb-4" class="ggb-container">4. Nézet</div></div>
    </div>

    <script>
        function log(msg) {
            var el = document.getElementById('log-window');
            el.innerHTML += "<br>> " + msg;
            console.log(msg);
        }

        var parameters = {
            "width": 600,
            "height": 600,
            "material_id": "uG5p4J9R", // Forgó kocka minta
            "appName": "3d",
            "showToolBar": false,
            "showAlgebraInput": false,
            "showMenuBar": false,
            "transparent": true, // Átlátszó háttér
            "borderColor": "none"
        };

        function initGeoGebra() {
            log("Ellenőrzés...");
            
            if (typeof GGBApplet === 'undefined') {
                log("HIBA: A GGBApplet nem töltött be.");
                log("Próbáld frissíteni az oldalt!");
                return;
            }

            log("API kész. Appletek injektálása...");

            var ids = ['ggb-1', 'ggb-2', 'ggb-3', 'ggb-4'];
            
            ids.forEach(function(id, index) {
                setTimeout(function() {
                    try {
                        var applet = new GGBApplet(parameters, '5.0');
                        applet.setHTML5Codebase('https://www.geogebra.org/apps/5.0.806.0/web3d/');
                        applet.inject(id);
                        log((index+1) + ". ablak indítva.");
                    } catch(e) {
                        log("HIBA (" + id + "): " + e);
                    }
                }, index * 500); // Fél másodperces késleltetés a terhelés elosztására
            });
        }

        // Várakozunk, amíg az oldal teljesen betölt
        window.addEventListener('load', function() {
            log("Oldal betöltve. Várakozás 1 mp...");
            setTimeout(initGeoGebra, 1000); // 1 másodpercet várunk biztosra
        });
    </script>
</body>
</html>

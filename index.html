<!DOCTYPE html>
<html>
  <head>
    <title>Hologram Tanterem - GeoGebra & Vide√≥</title>
    <meta charset="utf-8">
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
        
    <style>
      /* --- VEZ√âRL≈êPULT (3D t√©rben l√©v≈ë gombok) --- */
      .gomb-tarolo {
        position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
        display: flex; gap: 10px; z-index: 10;
      }
      .vezerlo-gomb {
        padding: 10px 20px; font-size: 16px; color: white; border: none; 
        border-radius: 8px; cursor: pointer; font-family: sans-serif; font-weight: bold;
        box-shadow: 0 4px 6px rgba(0,0,0,0.3); transition: 0.2s;
      }
      .gomb-zold { background-color: #4CAF50; }
      .gomb-kek { background-color: #2196F3; }

      /* --- K√ñZ√ñS ST√çLUS AZ ABLAKOKHOZ (Overlay) --- */
      .overlay-ablak {
        display: none; /* Alapb√≥l rejtett */
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background-color: rgba(0, 0, 0, 0.95); 
        z-index: 9999; 
        flex-direction: column; align-items: center; justify-content: center;
        font-family: sans-serif; color: #00ffff;
      }

      .cimsor { font-size: 24px; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 2px;}

      /* --- 1. VIDE√ì LEJ√ÅTSZ√ì ST√çLUS --- */
      #nagy-video {
        width: 80%; max-width: 1000px;
        border: 2px solid #00ffff; box-shadow: 0 0 20px #00ffff; border-radius: 10px;
      }

      /* --- 2. GEOGEBRA KERET ST√çLUS --- */
      #geogebra-frame {
        width: 90%; height: 80%; /* Nagyobb hely kell neki */
        border: 2px solid #bd00ff; /* Lila keret */
        box-shadow: 0 0 20px #bd00ff;
        border-radius: 10px;
        background-color: white;
      }

      /* --- BEZ√ÅR√ì GOMBOK --- */
      .bezaro-gomb {
        margin-top: 20px; padding: 10px 30px; font-size: 18px;
        background-color: transparent; border-radius: 50px; cursor: pointer; transition: 0.3s;
      }
      
      .gomb-videohoz { border: 2px solid #00ffff; color: #00ffff; }
      .gomb-videohoz:hover { background-color: #00ffff; color: black; }

      .gomb-geogebrahoz { border: 2px solid #bd00ff; color: #bd00ff; }
      .gomb-geogebrahoz:hover { background-color: #bd00ff; color: white; }

    </style>

    <script>
      // --- A-FRAME KOMPONENSEK (Matek & Geometria) ---
      AFRAME.registerComponent('haromszog-rajzolo', {
        schema: {
          A: {type: 'vec3', default: {x: 0, y: 0, z: 0}},
          B: {type: 'vec3', default: {x: 0, y: 1, z: 0}},
          C: {type: 'vec3', default: {x: 1, y: 0, z: 0}},
          szin: {type: 'color', default: 'yellow'}
        },
        update: function () {
          var data = this.data;
          var geometry = new THREE.BufferGeometry();
          var vertices = new Float32Array([
            data.A.x, data.A.y, data.A.z, data.B.x, data.B.y, data.B.z, data.C.x, data.C.y, data.C.z
          ]);
          geometry.setAttribute('position', new THREE.BufferAttribute(vertices, 3));
          geometry.computeVertexNormals(); 
          if (this.mesh) this.el.getObject3D('mesh').geometry.dispose();
          var material = new THREE.MeshBasicMaterial({ color: data.szin, side: THREE.DoubleSide, opacity: 0.9, transparent: true, depthTest: false });
          this.mesh = new THREE.Mesh(geometry, material);
          this.el.setObject3D('mesh', this.mesh);
        }
      });

      AFRAME.registerComponent('tiszta-keret', {
        schema: { szelesseg: {type: 'number', default: 2}, magassag: {type: 'number', default: 2}, melyseg: {type: 'number', default: 2}, szin: {type: 'color', default: 'white'} },
        init: function () {
          var edges = new THREE.EdgesGeometry(new THREE.BoxGeometry(this.data.szelesseg, this.data.magassag, this.data.melyseg)); 
          this.el.setObject3D('mesh', new THREE.LineSegments(edges, new THREE.LineBasicMaterial({ color: this.data.szin })));
        }
      });

      // --- INTERAKCI√ì KOMPONENS ---
      // Ez teszi lehet≈ëv√©, hogy klikkelj√ºnk a falon l√©v≈ë gombokra
      AFRAME.registerComponent('ablak-nyito', {
        schema: { tipus: {type: 'string'} }, // 'video' vagy 'geogebra'
        init: function () {
          var data = this.data;
          this.el.addEventListener('click', function () {
            if (data.tipus === 'video') megnyitVideo();
            if (data.tipus === 'geogebra') megnyitGeogebra();
          });
        }
      });
    </script>
  </head>
  <body>
    
    <div id="video-overlay" class="overlay-ablak">
      <div class="cimsor">üñ•Ô∏è Vide√≥t√°r</div>
      <video id="nagy-video" controls>
        <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">
      </video>
      <button class="bezaro-gomb gomb-videohoz" onclick="bezarMindent()">‚¨ÖÔ∏è VISSZA</button>
    </div>

    <div id="geogebra-overlay" class="overlay-ablak">
      <div class="cimsor" style="color: #bd00ff;">üìê Interakt√≠v Feladat</div>
      
      <iframe id="geogebra-frame" 
              src="https://www.geogebra.org/material/iframe/id/DdwRSyGG/width/1200/height/800/border/888888/sfsb/true/smb/false/stb/false/stbh/false/ai/false/asb/false/sri/true/rc/false/ld/false/sdz/true/ctl/false" 
              scrolling="no" frameborder="0">
      </iframe>
      
      <button class="bezaro-gomb gomb-geogebrahoz" onclick="bezarMindent()">‚¨ÖÔ∏è VISSZA A TEREMBE</button>
    </div>


    <div class="gomb-tarolo">
      <button class="vezerlo-gomb gomb-zold" onclick="metszetBeKi()">üëÅÔ∏è Metszet</button>
      <button class="vezerlo-gomb gomb-kek" onclick="kovetkezoMetszet()">‚û°Ô∏è Forgat√°s</button>
    </div>

    <a-scene renderer="sortObjects: true; antialias: true">
      
      <a-entity id="szoba">
        <a-plane position="0 0 0" rotation="-90 0 0" width="10" height="10" color="#8B5A2B"></a-plane>
        <a-plane position="0 4 0" rotation="90 0 0" width="10" height="10" color="#FFFFFF"></a-plane>
        
        <a-plane position="0 2 -5" width="10" height="4" color="#F5F5DC"></a-plane>
